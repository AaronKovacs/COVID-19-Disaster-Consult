{% extends "base-pages/base-libraries.html" %}
{% from "components/site_select.html" import site_select_navbar_dropdown %}
{% from "components/table_of_contents.html" import table_of_contents_pane, table_of_contents_modal %}


{% block head %}
{% block head_content %}{% endblock %}
{% endblock %}


{% block body %}
<header>
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="d-flex flex-grow-1">
      <a class="navbar-brand " style="margin-right: 5.5rem;" href="{{ url_for('select_screen', site=site) }}"
        id="navtitle">
        <img id="logo" alt="Logo" src="../../static/images/logo.png" class="img-fluid"
          style="width: 90px; height: 50px;">
        <span style="font-weight: 700">
          Disaster Consult <br>
          <b style="font-weight: 500">{{ site|upper }}</b>
        </span>

      </a>
      <div class="w-100 text-right pt-2">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#myNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </div>
    <div class="collapse navbar-collapse flex-grow-1 text-right" id="myNavbar">
      <ul class="navbar-nav ml-auto flex-nowrap">

        {{ site_select_navbar_dropdown(sites, site) }}

        {% if current_user.is_authenticated %}
        <li class="nav-item">
          <a href="{{ url_for('admin_select') }}" class="nav-link">Admin</a>
        </li>
        {% endif %}

      </ul>

    </div>
  </nav>
</header>

<main style="padding-top:5.5rem;">
  <div class="container-fluid">
    <div id="siteTitle" class="row">
      {% if site %}
      {% if request.path != url_for('Pages_home', site=site) %}
      <div class="col-12 col-md-3 align-content-center text-center">
        <a class="btn btn-nav-color-outline waves-effect text-center" style="max-width:80%; margin-top: -0.4em;"
          href="{{ url_for('Pages_home', site=site) }}">
          {{site}} | Home
        </a>
      </div>
      {% endif %}
      <div class="col-12 {% if request.path != url_for('Pages_home', site=site) %}col-md-6{% endif %} text-center">
        <h1>{{ site|upper }}</h1>
      </div>
    </div>
    <hr>
    {% endif %}
  </div>
  <div class="container-fluid">
    <div class="row">
      {{ table_of_contents_pane(table_contents, site, category) }}
      {{ table_of_contents_modal(table_contents, site, category) }}

      <div class="{% if table_contents %}col-12 col-lg-9{% else %}col-12{% endif %} mt-1">
        {% block main_content %}{% endblock %}
      </div>
    </div>
  </div>
  {% block secondary_content %}{% endblock %}
</main>
{% endblock %}


{% block scripts %}
<script>
  $(document).ready(function () {
    // Needed for navbar disaster search to work
    $('#disaster-select-dropdown').mdbDropSearch();
  });
</script>
{% block scripts_content %}{% endblock %}
{% endblock %}